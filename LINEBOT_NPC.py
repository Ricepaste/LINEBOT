import os
from flask import Flask, request, abort
from linebot import (
    LineBotApi, WebhookHandler
)
from linebot.exceptions import (
    InvalidSignatureError,
    LineBotApiError
)
from linebot.models import *

app = Flask(__name__)

# LINE BOT info
line_bot_api = LineBotApi(
    '0VH971y+3x7IbFvRMKzY+0w/pFaOOvJa6M+IEpADMVmNWZLtmLLNB7wek1PBcOnKVAWRYh3eqtD2JjNXpReRpxg42KQTEFQqMLk9wr9uZR3TrSOAhlRnT1URcX3zDiNFiIKYue4AQXT3T0pySXGEVQdB04t89/1O/w1cDnyilFU=')
handler = WebhookHandler('ef511c10f38305d34d906fe9421acd39')

DEBUG = True

# NPC interaction story

story = {
    "start": {
        "messages": [("é¾è‚‡æ”¿æ–‡å­¸åœ’å€ ï¼ˆèµ·é»ï¼‰\n"
                     "1.è±æ½­è¡—èˆˆå‰µåŸºåœ° \n2.å¤§æ²³å£©å°æ›¸åº—  \n3.èƒ¡å˜‰çŒ¶ä¹™æœªæŠ—æ—¥ç¢‘ \n4.é¾å…ƒå®® \n5. ä¸‰å‘è€è¡—\n\n"
                      "å°æ±Ÿä¸€é–‹å§‹å…ˆä¾†åˆ°äº†é¾è‚‡æ”¿æ–‡å­¸åœ’å€ï¼Œæƒ³è¦å¾é€™è£¡é–‹å§‹æ—…ç¨‹ã€‚é˜è€åˆè¢«ç¨±ç‚ºã€Œå°ç£æ–‡å­¸ä¹‹æ¯ã€ï¼Œ"
                      "ä»–æŠŠé¾æ½­çš„å‘¨é­ç©ºé–“ï¼Œä¸€é»ä¸€æ»´å¯«é€²ä»–çš„æ–‡ç« è£¡ï¼Œä½†æ˜¯é€™é™„è¿‘é‚„æœ‰å¥½å¤šè·Ÿå®¢å®¶ç›¸é—œçš„æ™¯é»ï¼Œ"
                      "è€Œå°æ±Ÿä»Šå¤©è¦å»ã€Œä¸‰å€‹åœ°æ–¹ã€ï¼Œä½†æ˜¯æƒ³çŸ¥é“ä¸‹ä¸€å€‹åœ°é»åœ¨å“ªï¼Œå°±å¿…é ˆå…ˆå®Œæˆé€™å€‹åœ°é»çš„ä»»å‹™ï¼Œ"
                      "æ‰æœƒå¾—åˆ°é—œæ–¼ä¸‹ä¸€å€‹æ™¯é»çš„æç¤ºå–”ï¼"
                      "é‚£æˆ‘å€‘å°±è¶•å¿«å’Œå°æ±Ÿä¸€èµ·ï¼Œè·Ÿè‘—é˜è€çš„ç­†è§¸æ‰€è‡³ä¸€èµ·æ›´åŠ èªè­˜é¾æ½­è£¡çš„å®¢å®¶ã€‚\n\n"),

                     ('å¤©ä¸Šçš„æ˜Ÿæ˜Ÿä¸èªªè©± åœ°ä¸Šçš„å¨ƒå¨ƒæƒ³åª½åª½\n'
                      'å¤©ä¸Šçš„çœ¼ç›çœ¨å‘€çœ¨ åª½åª½çš„å¿ƒå‘€é­¯å†°èŠ±\n'
                      'å®¶é„‰çš„èŒ¶åœ’é–‹æ»¿èŠ± åª½åª½çš„å¿ƒè‚åœ¨å¤©æ¶¯\n'
                      'å¤œå¤œæƒ³èµ·åª½åª½çš„è©± é–ƒé–ƒçš„æ·šå…‰é­¯å†°èŠ±'),

                     'ã€Šé­¯å†°èŠ±ã€‹æ˜¯è¨±å¤šå°ç£äººå…±åŒçš„å›æ†¶ï¼Œã€Šé­¯å†°èŠ±ã€‹æ˜¯ä½œè€…é¾è‚‡æ”¿è‡ª1960å¹´é–‹å§‹é€£è¼‰çš„é•·ç¯‡å°èªªï¼Œæ•…äº‹ä¸­çš„å ´æ™¯å¤šæè¿°å…¶å®¶é„‰çš„ç’°å¢ƒ'],
        "question": "Q1:è«‹å•é¾è‚‡æ”¿ç­†ä¸‹çš„å®¶é„‰æ˜¯å“ªè£¡å‘¢ï¼Ÿ",
        "options": ["A:é¾æ½­", "B:å°åŒ—", "C:é«˜é›„"],
        "answer": "A",
        "next": "q2"
    },
    "q2": {
        "messages": [("é¾è‚‡æ”¿å‡ºèº«æ–¼æ¡ƒåœ’é¾æ½­çš„å®¢å®¶èŠï¼Œã€Šé­¯å†°èŠ±ã€‹å³æ˜¯åœ¨é€™è£¡è—´è‚²è€Œæˆçš„ï¼Œé¾æ½­éå»æ˜¯èŒ¶è‘‰çš„é‡è¦ç”¢åœ°ï¼Œã€Šé­¯å†°èŠ±ã€‹äº¦æ˜¯ä»¥èŒ¶è¾²ç‚ºæ•…äº‹èƒŒæ™¯é–‹å±•ã€‚"
                      "å°å°çš„é­¯å†°èŠ±åœ¨è·¯é‚Šé»˜é»˜ç¶»æ”¾ï¼Œå‡‹è¬å¾Œæˆç‚ºèŒ¶åœ’çš„è‚¥æ–™ï¼Œè±¡å¾µè‘—çŠ§ç‰²å¥‰ç»çš„ç²¾ç¥ï¼Œå› æ­¤åˆè¢«ç¨±ç‚ºå®¢å®¶äººçš„æ¯è¦ªèŠ±"),

                     "ç¾åœ¨å°±è®“æˆ‘å€‘è·Ÿè‘—é˜è€çš„è…³æ­¥ä¸€èµ·æ¢ç´¢é¾æ½­å§ï¼\né€²å…¥é¾è‚‡æ”¿æ–‡å­¸ç”Ÿæ´»åœ’å€ã€‚",

                     "æ²¿è‘—æ–‘é§çš„ç´…ç£šç‰†èµ°è‘—ï¼Œå°æ±Ÿçªç„¶çœ‹åˆ°ç‰†é‚Šä¼¼ä¹æœ‰è‘—ä»€éº¼......"
                     "èµ°è¿‘ä¸€çœ‹ç™¼ç¾æ˜¯ä¸€å£åªæœ‰åŠé‚Šçš„å¤äº•"],
        "question": "Q2:åŸä¾†é€™æ˜¯ç•¶å¹´çš„ã€Œå…±ç”¨å¤äº•ã€ï¼Œéå»å¾æ—©åˆ°æ™šéƒ½æœ‰ä½åœ¨å®¿èˆçš„______ä¾†æ´—è¡£ã€æ´—èœï¼Œå­©å­å€‘ä¹Ÿæœƒåœ¨äº•é‚Šå¬‰æˆ²",
        "options": ["A:å…ˆç”Ÿå¨˜", "B:å°æœ‹å‹", "C:é˜¿å©†"],
        "answer": "A",
        "next": "q3"
    },
    "q3": {
        "messages": [
            "å…ˆç”Ÿå¨˜ xin24 sang24 ngiong11 (å››ç¸£)ï¼Œç”¨ä»¥ç¨±å‘¼é†«ç”Ÿæˆ–è€å¸«çš„å¦»å­ï¼Œæ„æŒ‡å¸«æ¯ã€é†«ç”Ÿå¤«äººã€‚å…±ç”¨å¤äº•åŸå…ˆæ˜¯å®Œæ•´çš„ä¸€å£äº•ï¼Œåœ¨å­¸æ ¡æ“´å»ºæ™‚æ›¾è¢«æ©åŸ‹ï¼Œé‡æ–°å‡ºåœŸå¾Œæ‰è®Šæˆç¾åœ¨åªå‰©åŠé‚Šäº•çš„æ¨£è²Œã€‚",

            "é€™æ™‚ï¼Œå°æ±Ÿçœ‹åˆ°æ—é‚Šå¥½åƒæœ‰äººå½±",

            "ğŸ˜®åŸä¾†æ˜¯é˜çˆºçˆºååœ¨æ—é‚Šçš„æœ¨æ¤…æ…ˆç¥¥åœ°çœ‹è‘—ä»–ã€‚",

            "å°æ±Ÿèµ°å‘é˜çˆºçˆºæ‰€åœ¨çš„å»ºç¯‰ç‰©æƒ³è¦ä¸€æ¢ç©¶ç«Ÿï¼Œçœ‹åˆ°é–€ç‰Œä¸Šå¯«è‘—é€™è£¡æ˜¯å—é¾è·¯3è™Ÿ",

            "(å°æ±Ÿä¾†åˆ°äº†ä½åœ¨3è™Ÿå®¿èˆçš„åœ’å€è³‡è¨Šç«™)\né¾è‚‡æ”¿ç”Ÿæ´»åœ’å€ç”±é¾æ½­åœ‹å°å®¿èˆç¾¤ã€æ­¦å¾·æ®¿çµ„æˆã€‚å®¿èˆåŒ…å«3è™Ÿå®¿èˆ(åœ’å€è³‡è¨Šç«™)ï¼›5ã€7è™Ÿå®¿èˆ(å¤§æ²³å­¸å ‚)ï¼›9è™Ÿå®¿èˆ(ä»¥æ–‡æœƒå‹è¬›å ‚)ã€11è™Ÿå®¿èˆ(é¾è‚‡æ”¿èˆŠå±…)",

            "ä¸€é¢ç‰†ä¸Šæœ‰è‘—ç”¨æ¯›ç­†å¯«ä¸‹çš„ä¸€æ®µè©±ï¼šã€Œéº¼å„•ç„¡æ•…é„‰ï¼Œéº¼å„•æ¯‹æƒ³é„‰......ã€"
        ],
        "question": "Q3:è«‹ä¾åºæ’å‡ºä¸‹æ–‡...",
        "image_urls": ["https://i.imgur.com/j71sZHb.png", "https://pic.pimg.tw/siouteng0822/1694172035-1521326360-g_n.jpg"],
        "options": ["A:é¾æ½­ä¿‚å¾æ•…é„‰", "B:ä¸æ™‚éƒ½ä¾†æ›å¿ƒè…¸", "C:åˆ†äº»å“ä¾†æ—¥å¤œæƒ³", "D:æ•…é„‰ä¿‚å¾æ¯", "E:ç™¼å¤¢éƒ½æœƒä¾†æƒ³"],
        "answer": "DCAEAB",
        "next": "q4"
    },
    "q4": {
        "messages": [
            "ã€Šé¾æ½­æ•…é„‰ã€‹æ˜¯é¾è€æ–¼åƒç¦§å¹´æ™‚ï¼Œåœ¨é›¢é€™è£¡ä¸é è™•çš„é¾æ½­å¤§æ± é‚Šæç­†ä»¥å®¢èªæ›¸å¯«çš„ã€‚",

            "å°æ±Ÿæ²¿è‘—å±•å€è·¯ç·šï¼Œè§€è³äº†è¨±å¤šé¾è‚‡æ”¿çš„ä½œå“ï¼Œåƒæ˜¯ã€Šé­¯å†°èŠ±ã€‹ã€ã€Šæ¿æµä¸‰éƒ¨æ›²ã€‹ã€ã€Šè‡ºç£äººä¸‰éƒ¨æ›²ã€‹ç­‰ç­‰ï¼Œæœ€å¾Œä¾†åˆ°äº†åœ’å€æœ€è£¡é¢çš„æ—¥å¼æ•™å¸«å®¿èˆï¼Œä¹Ÿå°±æ˜¯é¾è‚‡æ”¿çš„èˆŠå±…ã€‚",

            "åœ¨é€™è£¡å½·å½¿èƒ½çœ‹åˆ°é¾è€éå»ç”Ÿæ´»çš„ç—•è·¡ï¼Œä¸€å¼µç²¾ç¾çš„æªœæœ¨æ›¸æ¡Œä½”å»äº†æˆ¿é–“å¤§åŠçš„é¢ç©ï¼Œé¾è‚‡æ”¿è¨±å¤šä½œå“æ˜¯åœ¨é€™è£¡å®Œæˆçš„ï¼Œå°æ±Ÿä»”ç´°ä¸€çœ‹ç™¼ç¾æ¡Œä¸Šæ“ºæ”¾è‘—çš„æ˜¯é¾è‚‡æ”¿è€å¸«çš„æ‰‹ç¨¿"
        ],
        "question": "Q4:è«‹å•æ˜¯é¾è‚‡æ”¿çš„å“ªä¸€å€‹ä½œå“å‘¢ï¼Ÿ",
        "options": ["A:æ­¸ä¾†è¨˜", "B:é­¯å†°èŠ±", "C:æ¿æµä¸‰éƒ¨æ›²"],
        "answer": "A",
        "next": "q5"
    },
    "q5": {
        "messages": [
            "ã€ˆæ­¸ä¾†è¨˜ã€‰ï¼šã€Œé‚£é‚„æ˜¯å€‹åŒ±ä¹çš„å¹´ä»£ï¼Œä¸éæˆ‘ç‰¹åˆ¥è¨˜å¾—å‰›å‰›æœ‰æ—¥å…‰ç‡ˆçš„æ™‚ä»£ã€‚è¨—å®ƒä¹‹è³œï¼Œæˆ‘èƒ½åœ¨éå»æ‰€æƒ³åƒä¸åˆ°çš„å…‰ç·šä¸‹ï¼Œé–‹å§‹å¯«æˆ‘çš„ç¬¬ä¸€éƒ¨é•·ç¯‡å°èªªï¼Œé¡Œæ›°ï¼šã€Šé­¯å†°èŠ±ã€‹ã€‚ã€"
        ],
        "question": "Q5:é¾è‚‡æ”¿å±…ä½æ–¼æ­¤æ™‚æ›¾ä¸»å‹•ç™¼èµ·ã€Šæ–‡å‹é€šè¨Šã€‹ï¼Œä»–æ–‡å‹é€šè¨Šçš„æ‘¯å‹å€‘åŒ…æ‹¬å°åŒ—æ–½ç¿ å³°å’Œé™³ç«æ³‰ã€æ–°ç«¹è¨±ç‚³æˆã€"
        "é ­åŸææ¦®æ˜¥ã€æ±æ­¢å»–æ¸…ç§€ï¼Œä»¥åŠåŒç‚ºå®¢å®¶äººçš„_________",
        "image_urls": ["https://i.imgur.com/fmnJ3cW.png"],
        "options": ["A:ç¾æ¿ƒé¾ç†å’Œ", "B:æ–°ç«¹æ—æµ·éŸ³", "C:å°å—è‘‰çŸ³æ¿¤"],
        "answer": "A",
        "next": "q6"
    },
    "q6": {
        "messages": [
            "å°æ±Ÿï¼šã€Œæˆ¿é–“çš„æœ€å°¾ç«¯çœ‹èµ·ä¾†åƒæ˜¯å¦å¤–åŠ è“‹å‡ºå»çš„å»šæˆ¿å’Œé¤å»³ï¼Œèµ°éå»çœ‹ä¸€çœ‹å§ï¼ã€"
        ],
        "question": "Q6:å°æ±Ÿï¼šã€Œå“‡æ¡Œä¸Šæ“ºè‘—éƒ½æ˜¯å®¶è£¡å¸¸è¦‹çš„å®¢å®¶èœæ¬¸ï¼æœ‰æ»·è±¬è…³ã€é…¸èœç‚’è‚‰çµ².......é‚„æœ‰é¾è€æœ€æ„›çš„é¹¹èœæ¹¯è·Ÿ_____ã€",
        "image_urls": ["https://i.imgur.com/n15yPIP.png"],
        "options": ["A:ä¹å±¤ç³•", "B:å®¢å®¶ç±³ç²‰", "C:ç‰›è‚‰éºµ"],
        "answer": "A",
        "next": "q7"
    },
    "q7": {
        "messages": [
            "ã€Œä¹å±¤ç²„ã€æ˜¯ä»¥ä¸€å±¤åŠ äº†ç´…ç³–æ°´çš„ç±³æ¼¿ï¼Œå’Œä¸€å±¤åŠ äº†é¹½çš„ç™½è‰²ç±³æ¼¿ï¼Œè’¸è£½è€Œæˆçš„ï¼Œå£æ„Ÿç”œä¸­å¸¶é¹¹ï¼Œå¤–å‹é¡ä¼¼æ±å—äºçš„å¨˜æƒ¹ç³•ï¼Œå±¤å±¤åˆ†æ˜ã€æ£•ç™½ç›¸é–“ã€‚æœ‰è±¡å¾µè‘—æ­¥æ­¥é«˜å‡ã€å‡å®˜ç™¼è²¡ä¹‹æ„ï¼›æ–¼å¹´ç¯€é£Ÿç”¨å‰‡æœ‰å¸Œæœ›é•·è¼©èƒ½é•·å‘½ç™¾æ­²ï¼Œæ´»å¾—å¹³å®‰é•·ä¹…çš„æ„æ¶µã€‚\n\næ­¤å¤–ï¼Œå®¢å®¶äººæ™‚å¸¸åœ¨æ–™ç†ä¸­åŠ å…¥é…¸èœï¼Œé¾è‚‡æ”¿æœ€å–œæ­¡å¦»å­ç…®çš„ã€Œé¹¹èœæ¹¯ã€ï¼Œå°±æ˜¯å°‡é¹¹èœç‰‡ï¼ˆé…¸èœç‰‡ï¼‰åŠ ä¸Šä¸‰å±¤è‚‰åˆ‡ç‰‡æ…¢æ…¢ç‡‰ç…®æˆæ¹¯ã€‚",

            "å°æ±Ÿï¼šå“‡ï¼Œåœ¨éŠè¦½å®Œæ•´å€‹åœ’å€å¾Œï¼Œæ„Ÿè¦ºå°æ—¥æ²»æ™‚æœŸçš„å°ç£æ–‡å­¸ä½œå®¶ä»¥åŠå®¢èªä½œå“éƒ½æœ‰äº†æ›´å¤šçš„äº†è§£ã€‚",

            ("é˜è€ä¸åƒ…è¢«è­½ç‚ºå°ç£æ–‡å­¸ä¹‹æ¯ï¼Œåœ¨è‡ºç£å®¢å®¶é‹å‹•çš„æ¨å±•ä¸Šæ›´æœ‰è‘—ä¸å®¹å°è¦·çš„è²¢ç»ã€‚1970å¹´ä»£ï¼Œé¾è€ç©æ¥µç‚ºçœ¾å¤šæ–‡å­¸ç´€å¿µé¤¨çš„æˆç«‹å››è™•å¥”èµ°ï¼Œ"
             "ç”šè‡³åŒ…æ‹¬é‚„æˆ‘å®¢å®¶æ¯èªé‹å‹•ã€è‡ºç£å®¢å®¶å…¬å…±äº‹å‹™å”æœƒã€å¯¶å³¶å®¢å®¶é›»è‡ºçš„è¨­ç«‹çš†èˆ‡å…¶å¤§åŠ›æ¨å‹•æœ‰é—œã€‚ç­‰å›å»ä»¥å¾Œæˆ‘ä¸€å®šè¦è®€ä»–æœ€è‘—åçš„ä½œå“ï¼Œ"
             "é•·ç¯‡å°èªªã€Šé­¯å†°èŠ±ã€‹ã€å¤§æ²³å°èªªã€Šæ¿æµä¸‰éƒ¨æ›²ã€‹ä»¥åŠã€Šè‡ºç£äººä¸‰éƒ¨æ›²ã€‹!"),

            "å°æ±Ÿï¼šç¾åœ¨è®“æˆ‘å€‘ä¸€èµ·å•é˜è€ã€Œä¸‹ä¸€å€‹è¦æ¢è¨ªçš„åœ°é»åœ¨å“ªå‘¢ï¼Ÿã€å§ï¼",

            "(å›ç­”)é˜è€ï¼šæˆ‘æœ‰ä¸€å€‹æ¨è–¦çš„åœ°æ–¹ï¼Œé‚£è£¡çš„ç™¼å±•èªªèµ·ä¾†è·Ÿæˆ‘ä¹Ÿæœ‰é»é—œä¿‚ï¼Œçµ¦ä½ å€‘ä¸€é»æç¤ºå§ã€‚",
            '''èˆŠå¸‚å ´è¯éº—è®Šèº«ï¼Œ
æ–‡å‰µä¸€æ¢è¡—è¿æ–°ç”Ÿã€‚
ç¤¾å€å°æ•™å®¤è£¡ï¼Œ
æ‰‹ä½œé«”é©—æº«é¦¨æƒ…ã€‚
å°æ›¸åº—å®‰éœè§’è½ï¼Œ
è—æ–‡æ–°æ“šé»ï¼Œå¿ƒéˆçš„æ¸¯ç£ã€‚

æ··æ­ç¾å‘³åœ¨èˆŒå°–ï¼Œ
å‚³çµ±èˆ‡å‰µæ„é½Šèˆï¼Œ
æ–°æ»‹å‘³åœ¨å”‡é–“ã€‚

è¡—å€å¾®æ—…è¡Œï¼Œ
æ­¥æ­¥èµ°è®€è€åŸï¼Œ
æ˜”æ—¥é¢¨è¯ï¼Œ
ä¾ç„¶å‹•äººå¿ƒå¼¦ã€‚
é€™æ¨£å°±çŸ¥é“åœ¨å“ªè£¡äº†å§ï¼Ÿ'''
        ],
        "question": "ä¸‹ä¸€å€‹è¦æ¢è¨ªçš„åœ°é»åœ¨å“ªå‘¢ï¼Ÿ",
        "options": ["# è±æ½­è¡—èˆˆå‰µåŸºåœ°", "# å¤§æ²³å£©å°æ›¸åº—", "# èƒ¡å˜‰çŒ¶ä¹™æœªæŠ—æ—¥ç¢‘"],
        "answer": "è±æ½­è¡—èˆˆå‰µåŸºåœ°",
        "next": "q85"
    },
    "q85":
        {
            "messages": ["é€²å…¥è±æ½­è¡—èˆˆå‰µåŸºåœ°ã€‚"],
            "question": "(è«‹æ‹æ”ä¸¦ä¸Šå‚³å…¥å£ç…§ç‰‡)",
            "options": [],
            "answer": "",
            "allow_image_upload": True,
            "next": "q9"
    },
    "q9": {
        "messages": [("é˜è€ï¼šè±æ½­è¡—èˆˆå‰µåŸºåœ°çœŸæ˜¯ä¸€å€‹å……æ»¿æ–‡è—æ°£æ¯çš„è¡—å¸‚ï¼Œå…¶å¯¦é€™è£¡çš„ç™¼å±•èªªèµ·ä¾†ä¹Ÿè·Ÿæˆ‘æœ‰é»é—œä¿‚ï¼Œ"
                      "è±æ½­è¡—çš„å‰µç”Ÿç™¼èµ·äººå¼µæ™ºå®‡å…ˆç”Ÿå°±æ˜¯åœ¨é–±è®€äº†æˆ‘è‘—ä½œã€Šé­¯å†°èŠ±ã€‹å¾Œï¼Œä»–å€‘æ‰ç™¼ç¾ï¼šæ–‡ç« ä¸­çš„æ°´åŸé„‰å°±æ˜¯é¾æ½­é„‰ï¼Œ"
                      "è€Œæ°´åŸåœ‹æ ¡å³é¾æ½­åœ‹å°ï¼Œé€éå°èªªå¯ä»¥é€£çµåˆ°é¾æ½­çœŸå¯¦çš„åœ°æ™¯æ„è±¡ï¼Œå„˜ç®¡ç•¶åœ°æœ‰å¾ˆå¤šæ­·å²åœ°æ™¯å·²è¢«æ‹†é™¤ï¼Œ"
                      "ä½†ä»è¢«ä¿å­˜åœ¨æˆ‘çš„ç­†ä¸‹ã€‚"),

                     "æ–¼æ˜¯ä»–ä¾¿é–‹å§‹ç™¼æƒ³æ–‡å­¸æ˜¯ä¸æ˜¯å¯ä»¥ä¸²è¯è—è¡“èˆ‡æ–‡åŒ–ï¼Ÿæ˜¯å¦å¯ä»¥è·Ÿåœ¨åœ°çš„å•†æ¥­å’Œè§€å…‰å»åšçµåˆï¼Ÿä»¥åŠæ¿€å‹µæ›´å¤šå¹´è¼•äººè¿”é„‰å»åšæ›´å¤šçš„è—æ–‡å‰µä½œã€‚åœ¨2014å¹´æ™‚é€™å€‹å°å°çš„å¿ƒé¡˜ç¨®å­å°±åœ¨è±æ½­è¡—ç¨®ä¸‹ï¼Œé–‹å§‹ç™¼èŠ½æˆé•·ã€‚"
                     ],
        "question": "Qï¼šå°æ±Ÿï¼šè½èªªé€™æ¢è¡—æœ‰ä¸€é–“åº—å¸Œæœ›åœ¨è¡—å€æä¾›ä¸€è™•å¦‚åŒè‡ªå·±å®¶ä¸€èˆ¬çš„é¤é£²è™•æ‰€ï¼Œè®“ä¾†å¾€éŠå®¢åœä¸‹æ­‡è…³ã€èŠå¤©ã€‚"
        "åº—å…§æä¾›æ‰‹æ²–å’–å•¡ã€æ¿ƒéƒçš„ä¸»å»šå’–å“©ï¼Œé©åˆåœ¨é€›å®Œå•†åº—è¡—å¾Œï¼Œåä¸‹ç´°ç´°å“å‘³ç¾å‘³è¼•é£Ÿèˆ‡é£²å“ã€‚è€Œä¸”ä»–çš„åº—åæ˜¯å®¢èªçš„ã€Œå®¢å»³ã€çš„æ„æ€ï¼Œ"
        "ä½ å€‘èƒ½å‘Šè¨´æˆ‘é‚£é–“åº—çš„åå­—å—ï¼Ÿ",
        "image_urls": ["https://travel.tycg.gov.tw/content/images/attractions/47971/1024x768_attractions-image-gc1ct2gvwuqz0yo-vogqlw.jpg"],
        "options": ["# å»³ä¸‹å°é¤é¤¨", "# å®¢å®¶æœƒé¤¨", "# é˜¿å©†å°åƒ"],
        "answer": "å»³ä¸‹å°é¤é¤¨",
        "next": "q10"
    },
    "q10": {
        "messages": [
            "ã€Œå»³ä¸‹ã€é™¤äº†æŒ‡å®¢å»³ä»¥å¤–ï¼Œåœ¨å‚³çµ±å®¢å®¶å®¶åº­å…§ï¼Œä¹Ÿæ˜¯å®¢å®¶æ—ç¾¤ç¥­ç¥€ç¥–å…ˆç‰Œä½çš„ç¥è–ç©ºé–“ã€‚2022å¹´å¥³æ€§å½±å±•é˜å°æ¼”é„­æ…§ç²æ‹æ”çš„ç´€éŒ„ç‰‡ä½œå“å‘½åç‚ºã€Œå»³ä¸‹ç«ã€ï¼Œé€™é‚Šçš„ã€Œç«ã€æœ‰é»ç‡ˆçš„æ„æ€ã€‚ã€Œå»³ä¸‹ç«ã€ï¼Œæ˜¯èªªå®¢å®¶å®¶åº­åœ¨å‚æ™šè‡¨æš—æ™‚ç¯€ï¼Œä¼™æˆ¿å…§æˆå“¡é™¤äº†é»é¦™æ•¬æ‹œç¥–å…ˆä¹‹å¤–ï¼Œé»å»³ä¸‹ç«å³æ˜¯å‚æ™šå›ºå®šä¾‹è¡Œæ€§çš„å·¥ä½œã€‚ä¸ç®¡å»³ä¸‹æœ‰ç„¡å®‰å¥‰ç¥–å…ˆç‰Œä½ï¼Œæˆ–æ˜¯ä¼™æˆ¿å·²ç„¡äººå£å±…ä½ï¼Œæˆ–æ˜¯å·²ç•¶ä½œæ˜¯é–’ç½®ç©ºé–“ï¼Œè®“å»³ä¸‹ç«çš„å…‰èŠ’å¾¹å¤œç…§äº®ä¼™æˆ¿ç¦¾åŸ•ã€‚",

            ("Qï¼šå°æ±Ÿï¼šèªªåˆ°å®¢å®¶æ–‡åŒ–å°±ä¸å¾—ä¸äº†è§£ä¸€ä¸‹å®¢å®¶ç¾é£Ÿå§ã€‚å®¢å®¶æ—ç¾¤æ—©æœŸå…ˆæ°‘å€‘éœ€è¦é è‡ªå·±é›™æ‰‹å‹å‹•æ‹“è’å¢¾æ®–ï¼Œ"
             "å› æ­¤å®¢å®¶çš„å‹å‹•å¼·åº¦æ˜¯å¾ˆé«˜çš„ï¼Œè¦ä»¥å‹åŠ›æ›å–ç”Ÿå­˜ï¼Œæ”¹å–„ç¶“æ¿Ÿï¼Œæ‰€ä»¥ä¹Ÿå°±é †æ‡‰ç’°å¢ƒç™¼å±•å‡ºä»€éº¼èœç³»é¢¨æ ¼ï¼Ÿ"
             "ï¼ˆç­”é¡Œæ ¼å¼ï¼‰ã€Œ ã€ã€ã€Œ ã€ã€ã€Œ ã€")],
        "question": "Qï¼šè«‹é¸æ“‡å®¢å®¶èœçš„é¢¨æ ¼",
        "options": ["# é¹¹ã€é¦™ã€è‚¥", "# ç”œã€é¦™ã€å«©", "# é…¸ã€è¾£ã€ç”œ"],
        "answer": "é¹¹ã€é¦™ã€è‚¥",
        "next": "q11"
    },
    "q11": {
        "messages": [("Qï¼šé€™è£¡æœ‰ä¸€é–“å«è‰¸æœ¨é–“çš„åº—ä¹Ÿæœ‰è¨±å¤šå®¢å®¶ç‰¹è‰²çš„èœé¤šï¼Œå…¶ä¸­åˆˆåŒ…æœ‰ä¸€ç¨®å£å‘³æ˜¯æ­é…äº†å®¢å®¶çš„ç‰¹è‰²é†¬æ±ï¼Œæ˜¯ç”¨é‡‘æ¡”æ‰€è£½æˆï¼Œä½ å€‘çŸ¥é“é‚£æ˜¯ä»€éº¼å—ï¼Ÿ")],
        "question": "Qï¼šè«‹é¸æ“‡å®¢å®¶çš„ç‰¹è‰²é†¬æ±",
        "options": ["A:é†¬æ²¹è†", "B:æ¡”é†¬", "C:è±†ç“£é†¬"],
        "answer": "B",
        "next": "q12"
    },
    "q12": {
        "messages": [
            "æ¡”é†¬æ˜¯å®¢å®¶åº„ç‰¹æœ‰çš„æ²¾é†¬ã€‚æ¯å¹´çš„11æœˆåº•è‡³éš”å¹´éå¹´å‰ï¼Œæ˜¯é‡‘æ¡”ç››ç”¢çš„å­£ç¯€ã€‚è£½ä½œæ¡”é†¬æ˜¯å°‡é‡‘æ¡”è’¸ç†Ÿå»å­ç£¨é†¬ï¼Œå†ç”¨é¹½ã€è¾£æ¤’èª¿å‘³ã€‚æœ‰è‘—é‡‘æ¡”æ¿ƒéƒçš„é¦™å‘³ï¼Œå®¢å®¶äººç¿’æ…£åƒç™½æ–¬é›ã€ç™½åˆ‡äº”èŠ±è‚‰æ™‚ï¼Œå°‡å…¶ä½œæˆæ²¾æ–™èˆ‡æ²¾é†¬ï¼Œé¡è‰²åé»ƒå¸¶ç”œç¨ ï¼Œå£æ„Ÿç´°è†©å¸¶é…¸ç”œã€‚ä¸ä½†å¯å»æ²¹è†©ï¼Œä¹Ÿå¯ä»¥é–‹èƒƒï¼Œä¿ƒé€²é£Ÿæ…¾ï¼Œä»¤äººå›å‘³ã€‚é€šå¸¸é‡‘æ¡”é†¬æœƒå› é‡‘æ¡”çš„ç¨®æ¤ç”Ÿç”¢ï¼Œä»¥åŒ—éƒ¨æ–°ç«¹ã€åŒ—åŸ”åœ°å€ç”¢é‡è¼ƒå¤šï¼Œå—éƒ¨åœ°å€å‰‡å°‘ç”¢ã€‚",
            ("å°æ±Ÿï¼šåŸä¾†é‚£æ˜¯æ¡”é†¬gidË‹ jiongé˜¿ï¼Œé‚£é…¸ç”œæ¿ƒéƒçš„æ»‹å‘³çœŸçš„æœƒè®“äººèƒƒå£å¤§é–‹å‘¢ã€‚èª’é‚£é‚Šå¥½åƒæœ‰ä¸€é–“è·Ÿå®¢å®¶èŒ¶æ¥­ç›¸é—œã€Œè£½å“ã€çš„åº—ï¼Œ"
             "æˆ‘å€‘ä¸€èµ·éå»çœ‹çœ‹å§ï¼")],
        "question": "Qï¼šè«‹æ‰¾åˆ°æ­£ç¢ºåº—å®¶ä¸¦å›å¾©ã€ŒæŠµé”ï¼ˆåº—åï¼‰ã€",
        "options": ["# ç§˜ä¸æ‰‹ä½œ", "# å®¢å®¶èŒ¶åŠ", "# èŒ¶è‘‰ä¹‹å®¶"],
        "answer": "æŠµé”ç§˜ä¸æ‰‹ä½œ",
        "next": "q13"
    },
    "q13": {
        "messages": [("ç§˜ä¸æ‰‹ä½œä¸»æ‰“è‰æœ¬æ¤ç‰©æ‰‹å·¥çš‚çš„ç§˜ä¸æ‰‹ä½œï¼Œæœ€å¤§ç‰¹è‰²æ˜¯æ‰‹å·¥çš‚é¸ç”¨èˆ‡å®¢å®¶æ–‡åŒ–ç›¸é—œçš„æ¤ç‰©è£½ä½œï¼Œå¦‚é¾æ½­å®¢å®¶åº„çš„åœ¨åœ°åŒ…ç¨®èŒ¶ï¼Œ"
                      "ä»¥åŠåœ¨åœ°è‡ªå®¶ç¨®æ¤çš„ç´…èŒ¶ï¼Œä»¥èŒ¶è‘‰å…¥çš‚ï¼›æˆ–æ˜¯é¸ç”¨åœ¨åœ°ç”¢çš„è–‘é»ƒã€ç´…éº´ã€å‚™é•·ç‚­ã€æ©«å±±é„‰è€è–‘çˆºçˆºç¨®æ¤çš„ç„¡æ¯’è€è–‘ç­‰è£½ä½œå®¢å®¶å…ƒç´ é¦™çš‚ã€‚"),

                     ("å®¢å®¶äººç´ ä»¥ç†±æƒ…å¥½å®¢è‘—ç¨±ï¼Œã€Œä»¥èŒ¶æ•¬å®¢ã€ä»¥èŒ¶æœƒå‹ï¼›ä»¥èŒ¶çˆ²ç¦®ã€ä»¥èŒ¶æ•˜æƒ…ã€æ—©å·²æˆçˆ²å®¢å®¶äººç”Ÿæ´»çš„ä¸€éƒ¨ä»½ï¼Œä¸åƒ…æ˜¯æ–‡åŒ–çš„å‚³æ‰¿ï¼Œ"
                      "æ›´åœ¨å—é·è½è…³éç¨‹ä¸­ç™¼å±•äº†èŒ¶æ¥­ã€‚ç¶“ç”±å®¢å®¶äººç ”ç™¼æˆåŠŸæˆ–å®¢å®¶æ–‡åŒ–ç¨å‰µçš„èŒ¶å“ï¼Œå¦‚è†¨é¢¨èŒ¶ï¼ˆåˆç¨±ç™½æ¯«çƒé¾ã€æ¤ªé¢¨èŒ¶ã€æ±æ–¹ç¾äººèŒ¶ï¼‰ã€"
                      "é…¸æŸ‘èŒ¶ã€æŸšå­èŒ¶ã€æŸšé¦™èŒ¶ç­‰ï¼Œæºæ–¼å®¢å®¶äººå‹¤å„‰æƒœç‰©çš„å¤©æ€§è€Œå‰µå‡ºï¼Œä¹Ÿæœ€èƒ½åæ˜ å®¢å®¶ç²¾ç¥èˆ‡é¢¨è²Œã€‚")],
        "question": "Qï¼šè«‹å°‡ä»¥ä¸‹èŒ¶è‘‰èˆ‡å…¶ç‰¹è‰²ä½œé…å°\n"
        "1è†¨é¢¨èŒ¶\n2æŸšå­èŒ¶\n3é…¸æŸ‘èŒ¶\n\n"
        "ï¼¡ä»£è¡¨å®¢å®¶äººå…‹å‹¤å…‹å„‰ç²¾ç¥ã€‚æ˜¯æ—©å¹´å®¢å®¶äººåœ¨æ˜¥ç¯€æ™‚ä»¥è™é ­æŸ‘æ‹œç¥ï¼Œæ“ºæ”¾éå¹´å¾Œä¸æ¨ä¸Ÿæ£„ï¼Œå› æ­¤å°‡æŸ‘æ¡”æŒ–æ´å¾Œå–å‡ºæœè‚‰ï¼Œ"
        "å†å°‡èŒ¶è‘‰ã€ç´«è˜‡ã€è–„è·ã€ç”˜è‰ç­‰å„å®¶ä¸åŒçš„é…æ–™æ”ªæ‹Œæ··åˆå¾Œå›å¡«è™é ­æŸ‘ä¸­ï¼Œæ¥è‘—ç¶“éä¹è’¸ä¹æ›¬æ‰å®£å‘Šå®Œå·¥ã€‚"
        "æ˜¯å¯ä»¥ç´“ç·©æ‰æ¡ƒè…ºç™¼ç‚ã€é™ç«æ°£ã€æ½¤å–‰ã€çˆ½è²ã€æç¥çš„å¤©ç„¶æœèŒ¶é£²ã€‚\n"
        "ï¼¢å‘½åæœ‰å®¢èªã€Œå¹ç‰›ã€ä¹‹ï¼ŒåŸæ–™å¤šä»¥é¸ç”¨å¿ƒèŠ½è‚¥å¤§ã€ç™½æ¯«å¤šã€è‘‰è³ªæŸ”è»Ÿä¸”é­å°ç¶ è‘‰èŸ¬åˆºå¸éä¹‹ã€Œä¸€å¿ƒäºŒè‘‰ã€ç‚ºä¸»ï¼Œ"
        "è€ŒèŒ¶æ¹¯æ°´è‰²å‘ˆæ©™ç´…è‰²ï¼Œå…·å¤©ç„¶çš„èœœé¦™æˆ–ç†Ÿæœå‘³ï¼Œæ»‹å‘³åœ“æŸ”é†‡åšã€‚\n"
        "ï¼£æŠŠæ¡æ”¶å·²2è‡³3å¤©å¾ŒæŸšå­æœè‚‰æŒ–å‡ºï¼Œæ–°é®®æŸšè‚‰å»ç±½åŠ å…¥æª¸æª¬çš®ã€èŒ¶è‘‰ã€ä½›æ‰‹æŸ‘æ··åˆå‡å‹»ï¼Œæ‰å¯¦å¡å›ç©ºæŸšå­ï¼Œå†ç”¨ç¹©ç´¢ç¶ç·Šï¼Œ"
        "ä¸€æ¬¡è£½èŒ¶éœ€ç¶“éã€Œä¹è’¸ä¹æ›¬ã€éšæ®µï¼Œå·¥æ™‚èŠ±è²»3å€‹æœˆå·¦å³æ™‚é–“ã€‚ç›¸å‚³å–äº†èƒ½æ½¤å–‰æ­¢å’³ã€‚",
        "options": ["é¸é …å¦‚ä¸‹", "1Aã€2Bã€3C", "1Bã€2Cã€3A", "1Cã€2Aã€3B"],
        "answer": "1Bã€2Cã€3A",
        "next": "q14"
    },
    "q14": {
        "messages": [
            "æ²’éŒ¯ï¼Œä½ å€‘å¾ˆäº†è§£å®¢å®¶çš„ç‰¹è‰²èŒ¶è‘‰å‘¢ï¼Œå…¶å¯¦é…¸æŸ‘èŒ¶å’ŒæŸšå­èŒ¶çš„è£½ç¨‹åŸºæœ¬ä¸€æ¨£ï¼Œä½†è£½ä½œã€é…¸æŸ‘èŒ¶ã€çš„ã€é…¸æŸ‘ã€å‰‡éœ€è¦åˆ°è¾²æ›†å¹´å·¦å³æ‰å¯æ¡æ”¶ï¼Œä¸€å¹´åªç”Ÿç”¢ä¸€æ¬¡ã€‚",

            ("å°æ±Ÿï¼šåœ¨è±æ½­è¡—èˆˆå‰µåŸºåœ°å¯ä»¥çœ‹åˆ°å¥½å¤šå¤æ—©å®¢å®¶ç”Ÿæ´»æ–‡åŒ–èˆ‡æ–°äº‹ç‰©çš„çµåˆï¼Œè®“æˆ‘æœ‰å¥½å¤§çš„æ”¶ç©«ï¼Œ"
             "é›–ç„¶ä¸æ˜¯åœ¨å‚³çµ±å®¢å®¶èŠé•·å¤§ï¼Œä½†å¥½åƒç™¼ç¾å®¶è£¡ä¹Ÿæœ‰ä¸€äº›å®¢å®¶çš„å½±å­åœ¨ï¼Œåƒæ˜¯æˆ‘å®¶é˜¿å©†ä¹Ÿæœƒé»ã€Œå»³ä¸‹ç«ã€å‘¢ï¼"),

            ("å¥½æƒ³ç¹¼çºŒèªè­˜æ›´å¤šçš„å®¢å®¶æ–‡åŒ–ã€‚é˜è€ã€é˜è€ï¼é‚„æœ‰å…¶ä»–å®¢å®¶ç›¸é—œæ™¯é»å—ï¼Ÿ")],
        "question": "é˜è€ï¼šä¿¡ä»°ä¹Ÿæ˜¯å®¢å®¶æ–‡åŒ–ä¸­å¾ˆé‡è¦çš„ä¸€ç’°ï¼Œé‚£é¾æ½­å€çš„ä¿¡ä»°ä¸­å¿ƒåœ¨å“ªå‘¢ï¼Ÿ",
        "options": ["# é¾å…ƒå®®", "# å¤§å¤©åå®®", "# ä¸‰å±±åœ‹ç‹å»Ÿ"],
        "answer": "é¾å…ƒå®®",
        "next": "q15"
    },
    "q15": {
        "messages": [
            "æ²’éŒ¯ï¼Œå°±æ˜¯é¾å…ƒå®®ï¼Œåˆ°äº†ä¹‹å¾Œå°±å…ˆæ‰¾åˆ°ä¸»è¦ç¥­ç¥€çš„ç¥æ˜å§ã€‚",

            ("é¾å…ƒå®®æ¯å¹´å››æœˆçš„ã€Œäº”ç©€çˆºæ–‡åŒ–å­£ï½£ï¼Œä»¥è³½ç¥è±¬ã€å‚³çµ±æ¨‚æ›²è¡¨æ¼”ç­‰æ´»å‹•æ…¶è³€äº”ç©€çˆºèª•è¾°ï¼Œå ´é¢è¬äººç©ºå··ã€‚"
             "è€Œä¸€å¹´ä¸€åº¦çš„å…ƒå®µç¯€å‰‡æœ‰ã€Œè¿å¤è‘£ï½£è¸©è¡—å˜‰å¹´è¯ã€è²¡ç¥çˆºç™¼è²¡æ¯é‡‘é¶å¢ƒï¼Œåœ¨ä¸­ç§‹ç¯€æ™‚ï¼Œé¾å…ƒå®®ä¹Ÿæœƒèˆ‰è¾¦æ…¶ç¥æ´»å‹•ï¼Œ"
             "åŒ…æ‹¬èˆç…ã€éŠæˆ²æ´»å‹•æ›´æ˜¯åœ¨æ¯é€¢éå¹´ç¯€æ…¶çš„æ™‚å€™æœƒæœ‰æ­Œä»”æˆ²ã€æ“²æ¯æ¯”è³½ç­‰ï¼Œå¸å¼•äº†å¤§æ‰¹éŠå®¢å‰ä¾†åƒèˆ‡ã€‚")],
        "question": "Qï¼šå°ç£æ°‘é–“å¥‰ç¥€ç¥è¾²å¤§å¸çš„ç¥åƒå¤–å‹ï¼Œå› è¡Œæ¥­åˆ¥è€Œæœ‰æ‰€ä¸åŒï¼Œé‚£é¾å…ƒå®®çš„ç¥è¾²å¤§å¸è‡‰æ˜¯ä»€éº¼é¡è‰²çš„ï¼Ÿ",
        "options": ["# ç´…è‰²", "# é»‘è‰²", "# ç¶ è‰²"],
        "answer": "ç´…è‰²",
        "next": "q16"
    },
    "q16": {
        "messages": [
            "é¢éƒ¨å‘ˆç¾ç‚ºç´…è‰²çš„ç¥è¾²å¤§å¸ï¼Œæ˜¯è¾²æ°‘ç‚ºæ±‚äº”ç©€è±æ”¶ï¼Œå¸Œæœ›èƒ½å¤ æ™‚æ™‚è±æ”¶å¾—ä»¥æº«é£½ï¼Œäººäººè‡‰è‰²éƒ½å¦‚åŒç¥‚é‚£æ¨£ç´…æ½¤ã€‚\né¢éƒ¨å‘ˆç¾ç‚ºé»‘è‰²çš„ç¥è¾²å¤§å¸ï¼Œæ˜¯é†«è—¥ç•Œç‚ºäº†ç´€å¿µç¥è¾²å¤§å¸å› èª¤é£Ÿæ¯’è‰èº«ä¸­åŠ‡æ¯’ï¼Œå°è‡´å…¨èº«ç™¼é»‘ã€‚\né¢éƒ¨å‘ˆç¾ç‚ºç¶ è‰²çš„ç¥è¾²å¤§å¸ï¼Œå‰‡æ˜¯æ„å‘³ç¥è¾²æ—©å¹´å˜—ç™¾è‰ï¼Œè€Œé¢æœ‰èœè‰²ã€‚",

            "è€Œå®¢å®¶æ—ç¾¤å°ç¥è¾²ä¿¡ä»°çš„é‡è¦–ï¼Œä¸»è¦æ˜¯å› å®¢å®¶äººæ¸¡è‡ºè¼ƒæ™šï¼Œå¤§å¤šåƒ…èƒ½åœ¨å±±å€æˆ–åé åœ°å€é€²è¡Œè¾²æ¥­é–‹å¢¾ï¼Œå› ç’°å¢ƒæ¢ä»¶ç”šç‚ºè‰±é›£ï¼Œæ•…æ›´éœ€ç¥è¾²å¤§å¸çš„åº‡ç¥ï¼Œä»¥ç¥ˆæ±‚é–‹å¢¾é †åˆ©ã€äº”ç©€è±æ”¶ï¼Œç”±æ–¼å¤§å¤šï¥©å®¢å®¶äººæ˜¯ä»¥è¾²ç‚ºæ¥­ï¼Œå°äº”ç©€çˆºå´‡ç¥€ï¥¥ç‰¹åˆ¥è™”èª ã€‚",
            ("Qï¼šäº”ç©€çˆºåœ¨å°ç£æœ‰è¨±å¤šå¤–å‹ï¼Œä»¥ä¸‹å“ªäº›æ˜¯é¾å…ƒå®®äº”ç©€çˆºçš„å½¢è±¡ï¼Ÿ")],
        "question": "è«‹é¸æ“‡é¾å…ƒå®®äº”ç©€çˆºçš„å½¢è±¡\nï¼ˆç­”é¡Œæ ¼å¼ï¼‰ã€Œ ã€ã€ã€Œ ã€ã€ã€Œ ã€",
        "options": ["A:é ­è§’å´¢å¶¸", "B:æ–‡å®˜æ°£æ´¾", "C:è¢’èƒ¸éœ²èƒŒ", "D:è…°åœæ¨¹è‘‰", "E:è¡£å† æŸå¸¶", "F:èµ¤æ‰‹è·£è¶³", "G:æ‰‹æŒç¨»ç©—"],
        "answer": "Bã€E",
        "next": "q17"
    },
    "q17": {
        "messages": [
            "å°ç£åœ°å€çš„ç¥è¾²ç¥åƒé€ å‹å¾ˆå¤šï¼Œæœ‰é ­è§’å´¢å¶¸ã€è¢’èƒ¸éœ²èƒŒã€è…°åœæ¨¹è‘‰ã€èµ¤æ‰‹è·£è¶³ã€æ‰‹æŒç¨»ç©—ä¹‹åŸå§‹é€ å‹ï¼Œä¹Ÿæœ‰å„€è¡¨å¦‚èŠç¨¼æ¼¢ã€è³ªæ¨¸è¦ªåˆ‡çš„ç¥è²Œã€‚é¾å…ƒå®®ä¾›å¥‰çš„ç¥è¾²å¤§å¸ï¼Œ åˆç¨±ç‚ºäº”ç©€çˆºï¼Œè¡£å† æŸå¸¶ï¼Œæ–‡å®˜æ°£æ´¾èˆ‡ä¸€èˆ¬åŸå§‹æ™‚ä»£è¾²æ°‘çš„ç¥è¾²åƒå®Œå…¨ä¸åŒï¼Œæ˜¯åŒ—éƒ¨å°‘è¦‹çš„ä¾‹å­ã€‚æ“šèªªé€™æ¨£ç‰¹æ®Šçš„å½¢è±¡èˆ‡ç•¶åœ°æ–‡é¢¨èˆˆç››æœ‰é—œã€‚",

            "å°æ±Ÿï¼šã€Œé€™è£¡é™¤äº†ä¾›å¥‰äº”ç©€çˆºä»¥å¤–é‚„æœ‰å¥½å¤šå…¶ä»–çš„ç¥æ˜è·Ÿå»³å®¤ï¼Œè®“æˆ‘å€‘ä¸€èµ·éå»çœ‹çœ‹å§ï¼ã€",

            ("Qï¼šä¸Šåœ–ç‚ºé¾å…ƒå®®çš„æ ¼å±€åœ–ï¼Œè«‹å°‡å„å€‹ä½ç½®çš„åç¨±å’Œå…¶åŠŸèƒ½åšé…å°ã€‚"),
            ("ä½ç½®åç¨±\n"
             "1. å»ŸåŸ•\n2. æ‹œæ®¿ï¼ˆæ‹œäº­ï¼‰\n3. å‰æ®¿\n4. é¾è™é–€\n5. æ­£æ®¿\n6. å¾Œæ®¿\n7. é˜é¼“æ¨“\n8.å»‚å»Š\n"
             "ä½ç½®åŠŸèƒ½\n")
        ],
        "question":
        "Bå»ŸåŸ•æ˜¯é¦™å®¢è¦å…¥å»Ÿåƒæ‹œå‰é›†åˆçš„å ´æ‰€ï¼Œç©ºé–“æœ€å¯¬æ•ï¼Œä¹Ÿæ˜¯è—é™£æˆ–ç«¥ä¹©å¤§å±•ç¥é€šçš„åœ°æ–¹ã€‚\n"
        "Eæ˜¯ä¾›ä¿¡çœ¾ç¥­æ‹œçš„åœ°æ–¹ï¼Œé€šå¸¸æœƒæ“ºæ”¾ä¸€å€‹å¤§é¦™çˆã€‚\n"
        "Gåˆå«åšã€Œä¸‰å·æ®¿ã€æˆ–ã€Œä¸‰å·é–€ã€ï¼Œæ˜¯å¯ºå»Ÿçš„ç¬¬ä¸€æ®¿ï¼Œä¹Ÿæ˜¯ä¿¡çœ¾åˆæ‹œçš„ä½ç½®ã€‚å¤–è§€è¯éº—ï¼Œè£é£¾æœ€ç‚ºç¹è¤‡ï¼Œæ˜¯å¯ºå»Ÿè—è¡“è¡¨ç¾çš„é‡é»æ‰€åœ¨ã€‚\n"
        "Aä½åœ¨ä¸‰å·é–€çš„å…©å´ï¼Œå·¦é¾å³è™ï¼Œèˆ‡ä¸‰å·é–€åˆç¨±ç‚ºã€Œäº”é–€ã€ï¼Œæ˜¯ä¿¡çœ¾å‡ºå…¥çš„é€šé“ï¼Œç¿’æ…£ä¸Šç”±é¾é–€é€²å…¥ï¼Œç”±è™é–€å‡ºã€‚\n"
        "Då¯ºå»Ÿçš„ä¸»ç¥€ç©ºé–“ï¼Œæ˜¯ç¥€ç¥çš„è–åŸŸï¼Œå…§éƒ¨å…‰ç·šæ˜äº®ï¼Œæ­é…è‘—æš—ç´…å¤§ç†çŸ³ç¥é¾•ï¼Œæ°£æ°›é¡¯å¾—èŠåš´è‚…ç©†ã€‚\n"
        "Fæ˜¯ä¸­è»¸ä¸Šæœ€å¾Œä¸€é€²çš„æ®¿å®‡ï¼Œå› ç‚ºç¥€å¥‰çš„æ˜¯é™ªç¥€çš„ç¥æ˜ï¼Œæ‰€ä»¥åœ¨å»ºç¯‰çš„é«˜åº¦å’Œé€²æ·±ä¸Šéƒ½æ¯”æ­£æ®¿ä¾†å¾—å°ã€‚\n"
        "Cä½æ–¼é¾è™é–€ä¹‹å¾Œï¼Œå…©å»‚ä¹‹ä¸Šï¼Œåˆ†åˆ¥ç‚ºå·¦ï¼ˆé¾ï¼‰é˜ã€å³ï¼ˆè™ï¼‰é¼“ã€‚é‡æœ‰é‡å¤§ç¥€å…¸æˆ–è²´è³“å…¥å»Ÿï¼Œå°±æœƒé˜é¼“é½Šé³´ï¼Œè¡¨ç¤ºæ•¬è¿ä¹‹æ„ã€‚\n"
        "Hä½æ–¼å¯ºå»Ÿçš„å·¦å³å…©å´ï¼Œé€šå¸¸ä½œç‚ºç®¡ç†å§”å“¡æœƒçš„è¾¦å…¬æ‰€åœ¨ï¼Œæœ‰æ™‚ä¹Ÿä½œç‚ºé™ªç¥€ç¥æ˜çš„åæ®¿",
        "image_urls": ["https://i.imgur.com/QMpsG9d.png"],
        "options": ["ï¼ˆç­”é¡Œæ ¼å¼ç¯„ä¾‹ï¼‰ï¼š1-Aã€2-Bã€3-Cã€4-Dã€5-Eã€6-Fã€7-Gã€8-H"],
        "answer": "1-Bã€2-Eã€3-Gã€4-Aã€5-Dã€6-Fã€7-Cã€8-H",
        "next": "q18"
    },
    "q18": {
        "messages": [
            "ç¾åœ¨çš„é¾å…ƒå®®ç‚ºå…©æ®¿å¼å»ºç¯‰ï¼Œç”±çƒæ¨¹æ—ä»•ç´³ç¿æ–°çµ±ã€ç¿æ–°é€ ï¼Œé»ƒæ³¥å¡˜ä»•ç´³æé¤Šã€é»ƒæ¨¹å‹³ã€å¤æœ›æ—ç­‰äººç™¼èµ·ï¼Œå¢å»ºäº†å‰æ®¿å’Œå¾Œæ®¿ã€‚æ¬¡å¹´ï¼Œç¿æ–°çµ±ã€ç¿æ–°é€ èˆ‡é»ƒæ¨¹å‹³ã€é¾æœƒå®ç­‰äººå†æ¬¡ç™¼èµ·å‹Ÿæï¼Œé€²è¡Œå¾Œæ®¿å¢é«˜åŠå·¦å³èµ°å»Šçš„å»ºè¨­ã€‚åœ¨æˆ°å¾Œçš„1966å¹´æˆç«‹ä¿®å»ºå§”å“¡æœƒï¼Œæ¨é¸ç¿ç‘å·ç‚ºä¸»ä»»å§”å“¡ï¼Œå‹Ÿå¾—32è¬é¤˜å…ƒé€²è¡Œä¿®å¾©ã€‚ç›®å‰çœ‹åˆ°çš„å»Ÿè²Œä¸»è¦æ˜¯1994å¹´æ”¹å»ºå®Œæˆçš„ï¼Œå¢è¨­äº†å¤©äº•å’Œé˜é¼“æ¨“ã€‚è‡ª2010å¹´èµ·ï¼Œå»Ÿæ–¹é™¸çºŒæ”¹å»ºäº†å…©å´å»‚æˆ¿ï¼Œæ‹“å¯¬äº†å»ŸåŸ•å»£å ´ï¼Œä¸¦åœ¨å»Ÿå¾Œå¢å»ºäº†æ´»å‹•ä¸­å¿ƒï¼Œä»¥æ“´å±•ç©ºé–“ï¼Œæ–¹ä¾¿èˆ‰è¾¦æ¯å¹´è±å¯Œå¤šæ¨£çš„å»Ÿæœƒæ´»å‹•ã€‚",
            "Qï¼šå»Ÿå…§çš„å»ºç¯‰é¢¨æ ¼ç‚ºå…©æ®¿å¼ï¼Œæ­£æ®¿ä¸»ç¥€æ˜¯ç¥è¾²å¤§å¸ï¼Œåæ®¿ä¸»ç¥€æ˜¯æ–—æ¯å…ƒå›ï¼Œè«‹åˆ†åˆ¥å¯«å‡ºç¥‚å€‘å·¦ã€å³é™ªç¥€çš„ç¥æ˜ã€‚",
            "æ­£æ®¿ä¸»ç¥€â€”ç¥è¾²å¤§å¸\næ­£æ®¿é™ªç¥€ï¼ˆå·¦ï¼‰â€” ã€ç”²ã€‘\næ­£æ®¿é™ªç¥€ï¼ˆå³ï¼‰â€” ã€ä¹™ã€‘\nåæ®¿ä¸»ç¥€â€”æ–—æ¯å…ƒå› \nåæ®¿é…ç¥€ ( å·¦ )â€” ã€ä¸™ã€‘\nåæ®¿é™ªç¥€ ( å³ )â€”ã€ä¸ã€‘"],
        "question": "Qï¼šè«‹ä¾åºå¯«å‡ºç¥æ˜é™ªç¥€åï¼Œï¼ˆç­”é¡Œæ ¼å¼æç¤ºï¼‰ï¼šç”²ã€ä¹™ã€ä¸™ã€ä¸",
        "options": ["é¸é …ï¼š", "#å¤©ä¸Šè–æ¯", "#æ–‡æ˜Œå¸å›", "#è²¡ç¥çˆº", "#è¨»ç”Ÿå¨˜å¨˜"],
        "answer": "æ–‡æ˜Œå¸å›ã€å¤©ä¸Šè–æ¯ã€è²¡ç¥çˆºã€è¨»ç”Ÿå¨˜å¨˜",
        "next": "q19"
    },
    "q19": {
        "messages": [
            "Qï¼šé¾å…ƒå®®å…§çš„è—»äº•æ˜¯ä¸­åœ‹å»ºç¯‰è£¡ç‰¹æœ‰çš„å¤©èŠ±æ¿çµæ§‹åŠè£é£¾æ‰‹æ³•ï¼Œé€šå¸¸é¸åœ¨å¤©èŠ±æ¿æœ€é¡¯çœ¼çš„ä½ç½®ï¼Œç”±å››å‘¨ä¸æ–·å‘ä¸­å¿ƒæ‡¸æŒ‘å…§ç¸®çš„æ–—æ‹±ï¼Œäº¤ç¹”æˆç¶²ç‹€çš„å‚˜è“‹å½¢é ‚æ£šï¼Œç”±ä¸‹å¾€ä¸Šçœ‹ï¼Œæ·±é‚ƒå¦‚äº•ï¼Œæ‰€ä»¥ç¨±ç‚ºã€Œè—»äº•ã€ã€‚"
        ],
        "question": "è«‹æ‰¾å‡ºã€Œè—»äº•ã€ä¸¦æ‹ç…§ã€‚",
        "options": [],
        "answer": "",
        "allow_image_upload": True,
        "next": "q20"
    },
    "q20": {
        "messages": [
            ("è—»äº•æœ€ä¸­å¿ƒçš„éƒ¨åˆ†æ˜¯ä¸€å€‹å…«è§’å½¢æˆ–è¿‘ä¼¼åœ“å½¢çš„çµæ§‹ï¼Œç¨±ç‚ºã€Œé ‚å¿ƒæ˜é¡ã€ã€‚ç”±æ–¼ã€Œé ‚å¿ƒæ˜é¡ã€ä¸Šå¸¸ç¹ªæœ‰é¾å½¢åœ–æ¡ˆï¼Œæ•…åˆè¢«ç¨±ç‚ºã€Œé¾äº•ã€ã€‚"
             "è—»äº•æœ€åˆçš„åŠŸèƒ½æ˜¯æ”¯æ’å¤©çª—ï¼Œå¾Œä¾†æ¼”è®Šç‚ºåŒ å¸«å€‘ç«¶æŠ€çš„å ´æ‰€ï¼Œå…¶çµæ§‹ä¹Ÿè®Šå¾—è¶Šä¾†è¶Šè¤‡é›œå’Œè¯éº—ã€‚"
             "æ ¹æ“šè—»äº•çš„å¤–å½¢å’Œç¶²ç›®çµæ§‹çš„ä¸åŒï¼Œæœ‰å…«å¦å½¢ã€åœ“å½¢ã€æ©¢åœ“å½¢ã€æ–¹å½¢ã€å…­è§’å½¢æˆ–å…§åœ“å¤–å…«å¦ã€å…§å…«å¦å¤–åœ“ç­‰å½¢å¼ã€‚"),
            ("æ“šèªªè—»äº•çš„ç”±ä¾†æ˜¯é€™æ¨£çš„ï¼šæ˜å¤ªç¥–æœ±å…ƒç’‹ç‚ºäº†èº²é¿é™³å‹è«’çš„è¿½å…µï¼Œèµ°æŠ•ç„¡è·¯ä¹‹éš›èº²é€²ä¸€å€‹ç ´èˆŠçš„å±±ç¥å»Ÿä¾›æ¡Œåº•ä¸‹ï¼Œä»¥ç ´èˆŠçš„æ¡Œå·¾é®è”½è‡ªå·±ï¼Œä¸¦é»˜é»˜ç¥ˆæ±‚ç¥æ˜ä¿ä½‘ã€‚"
             "æ­¤æ™‚ï¼Œå±±ç¥è®Šå‡ºä¸€å¼µå®Œæ•´çš„èœ˜è››ç¶²ï¼Œå°‡æœ±å…ƒç’‹è—èº«çš„ç ´æ¡Œå·¾ç¸«éš™ç·Šç·Šç¶²ä½ã€‚è¿½å…µè¶•åˆ°å¾Œï¼Œè¦‹å››å‘¨ç„¡äººä¸”èœ˜è››ç¶²å®Œæ•´ï¼Œèªç‚ºæœ±å…ƒç’‹ä¸å¯èƒ½è—åœ¨æ­¤è™•ï¼Œä¾¿æ²’æœ‰ç´°æŸ¥é›¢é–‹äº†ï¼Œ"
             "æœ±å…ƒç’‹å› æ­¤å¾—ä»¥ä¿å‘½ã€‚ç•¶æœ±å…ƒç’‹æˆç‚ºçš‡å¸å¾Œï¼Œç‚ºæ„Ÿè¬ç¥æ˜çš„ä¿ä½‘ï¼Œä¾¿å‘½å»ºç¯‰å·¥åŒ ä¾ç…§èœ˜è››ç¶²çš„å½¢ç‹€åœ¨å¤§æ®¿å®¤å…§å»ºé€ å‡ºã€Œè—»äº•ã€ï¼Œæ—¢ä½œç‚ºå¹¸é‹ç¬¦ï¼Œåˆè¡¨é”å°ç¥æ©çš„æ°¸é æ„Ÿå¿µã€‚"
             "é€™é›–ç„¶æ˜¯ä¸€å‰‡æœªç¶“è­‰å¯¦çš„èªªæ³•ï¼Œä½†ç¢ºå¯¦æ˜¯ä¸€æœ‰è¶£çš„æ•…äº‹ã€‚\n"
             "Qï¼šå»Ÿå‰çš„å¤§å»£å ´æœ‰å¤©å…¬çˆï¼Œè€Œã€Œæ‹œå¤©å…¬ã€å°å®¢å®¶äººä¾†èªªæ˜¯ä¿¡ä»°ä¸­å¾ˆé‡è¦çš„ä¸€ç’°ã€‚"
             "ä¸‹é¢å“ªäº›é—œæ–¼å®¢å®¶å¤©å…¬ä¿¡ä»°çš„æè¿°æ˜¯æ­£ç¢ºçš„ï¼Ÿ")],
        "question": "Aè¾²æ›†é™¤å¤•å¤œçš„å‰ä¸€æ™šå­æ™‚ä»¥å¾Œï¼Œå®¢å®¶äººåœ¨å°å¹´å¤œçš„ç¿’ä¿—ï¼Œæœƒåœ¨é–€å£è¨­é¦™æ¡ˆæ‹œå¤©å…¬ï¼Œæ„Ÿè¬ä¸Šå¤©ä¸€å¹´ä¾†çš„åº‡ä½‘ã€‚\n"
        "B æ‹œå¤©å…¬ï¼Œæœ‰åˆ†ä¸Šç•Œä¸‹ç•Œï¼Œä¸Šç•Œæ‹œç´ ï¼Œä¸‹ç•Œæ‹œè‘·\n"
        "Cå®¢å®¶äººåœ¨è¾²æ›†åˆä¹æ‹œå¤©å…¬ï¼Œå¹´åˆä¸€æ™‚å‰‡ç¥­å¤©è¿æ–°ï¦ã€‚",
        "options": [],
        "image_urls": ["https://i.imgur.com/j8ofL0T.png"],
        "answer": "Aã€B",
        "next": 'q21'
    },
    "q21": {
        "messages": [
            "é–©å—äººè¾²æ›†åˆä¹æ‹œå¤©å…¬ï¼Œå®¢å®¶äººå‰‡åœ¨å¹´ä¸‰åæ™‚ï¼Œæœƒç¥­å¤©ä»¥è¾­ï¦ï¼Œå¹´åˆä¸€æ™‚å‰‡ç¥­å¤©è¿æ–°ï¦ã€‚é™¤äº†ç¥ç¥‡ä¿¡ä»°ï¼Œå®¢å®¶äººæœ€é‡è¦–ç¥–å…ˆå´‡æ‹œï¼Œã€Œæ‹œé˜¿å…¬å©†ã€ä¹ƒæ˜¯å®¢å®¶äººèªç‚ºæœ€ç‚ºé‡è¦çš„å¤§äº‹ã€‚å› æ­¤ä¸€èˆ¬ç¥­æ‹œæ™‚é †åºéƒ½æ˜¯å…ˆç¥­ç¥–ï¼Œç„¶å¾Œæ‰æ˜¯ç¥­æ‹œç¥æ˜ã€‚",

            "å°æ±Ÿï¼šã€Œä½ çœ‹ä½ çœ‹ï¼Œå‰›å‰›æˆ‘æŠ¬é ­ç™¼ç¾å±‹é ‚ä¸Šæœ‰ç”¨é›™é¾æ¶ç ï¼ˆ é¾èˆ‡å¯¶ç ï¼‰ã€é›™é³³ã€ç¦ç¥¿å£½ä¸‰ä»™ã€å¤©å®˜è³œç¦ã€ç¥ˆæ±‚å‰æ…¶ï¼ˆ æ——çƒæˆ¢ç£¬ï¼‰ã€åŒç…æˆ²çƒã€åŒ—æ¥µä»™ç¿ã€éº»å§‘ç»å£½ã€äººç‰©æˆ°é¦¬ã€å¯¶ç ã€å¯¶å¡”ã€éº’éºŸã€é¾é¦–ã€é£›é³³ã€é›²å½©ã€ä»™äººã€ä»™å¥³ã€ç¥ç¸ã€é­šåŒ–é¾åŠå…¶ä»–ä»£è¡¨å‰ç¥¥çš„å‹•ç‰©ã€äººç‰©å±±æ°´ã€èŠ±è‰ç­‰ç­‰ï¼Œç”¨äº”é¡å…­è‰²çš„å¡‘è† ç‰‡æˆ–æ˜¯å½©è‰²ç»ç’ƒç‰‡æ‰€è£½ä½œçš„äº¤è¶¾é™¶è£é£¾ã€‚ã€",

            ("Qï¼šé¾å…ƒå®®å±‹é ‚ç‰¹è‰²æœ€æ˜é¡¯çš„ç‰¹å¾µå°±æ˜¯å±‹é ‚æ­£è„Šå°¾ç«¯çªå‡ºä¸”å¾€ä¸Šæšï¼Œå‚è„Šé ‚ä½æ­£è„Šï¼Œå½¢ç‹€æœ‰å¦‚ç‡•å­çš„å°¾å·´ä¸€æ¨£ï¼Œä¸€èˆ¬å¸¸è¦‹æ–¼å»Ÿå®‡ï¼Œ"
             "ä½†ä¹Ÿæœ‰å‡ºç¾æ–¼å®…ç¬¬ä¸Šï¼Œè‹¥èº«ä»½ç‚ºå®˜å®¦ã€å¯Œè²´äººå®¶ã€åŠŸååŠç¬¬è€…ï¼Œé€šå¸¸ä¹Ÿæœƒæ–¼å®…ç¬¬ä¸Šè£é£¾ç‡•å°¾ï¼Œé€™æ˜¯ä¸€ç¨®æ¦®è€€çš„è±¡å¾µã€‚"
             "è«‹å•é€™ç¨®å»ºç¯‰ç‰¹è‰²ç¨±ç‚ºä»€éº¼ï¼Ÿ")],
        "question": "è«‹é¸æ“‡å»ºç¯‰ç‰¹è‰²åç¨±",
        "options": ["A:ç‡•å°¾", "B:é¦¬èƒŒ", "C:ç“¦é®"],
        "image_urls": ["https://i.imgur.com/soyj9V7.png"],
        "answer": "A",
        "next": 'q22'
    },
    "q22": {
        "messages": [
            "åœ¨è‡ºç£çš„æ°‘é–“å‚³èªªä¸­ï¼Œç‡•å°¾è„Šåªèƒ½ç”±å®˜å“¡æˆ–ä¸­èˆ‰äººå®¶æ—ä½¿ç”¨ï¼Œé–©å—åœ°å€ä¹Ÿæœ‰é¡ä¼¼çš„èªªæ³•ã€‚è¨±å¤šè‡ºç£çš„åˆé™¢æ°‘å®…æœƒåœ¨æ­£èº«å±‹è„Šä¸Šè¨­ç½®ç‡•å°¾è„Šï¼Œä»£è¡¨å®¶æ—çš„ç¥–ç¥ ï¼Œå°¤å…¶åœ¨å®¢å®¶å®¶æ—ä¸­æ›´ç‚ºå¸¸è¦‹ã€‚é›–ç„¶ç‡•å°¾è„Šè±¡å¾µå°Šè²´ï¼Œä½†æœ‰æ™‚å®—ç¥ æˆ–å»Ÿå®‡æ“”å¿ƒç¿¹èµ·çš„ç‡•å°¾è„Šæœƒæ²–çŠ¯æ°‘å®…ï¼Œæœƒåœ¨å¤–åŠ ä¸€é“é¦¬èƒŒè„Šï¼Œå½¢æˆç‰¹æ®Šçš„å±‹é ‚é€ å‹ã€‚\n\nç‡•å°¾è„ŠæŒ‡çš„æ˜¯å±‹é ‚æ­£è„Šå…©ç«¯å‘ä¸Šç¿¹èµ·ï¼Œå¦‚ç‡•å­çš„å°¾å·´ã€‚é€™ç¨®è¨­è¨ˆå¸¸è¦‹æ–¼å®˜å®…æˆ–å»Ÿå®‡ï¼Œæ­£è„Šæˆæ›²ç·šå‘ä¸Šæšèµ·ï¼Œå°¾ç«¯åˆ†å‰æˆå…©æ”¯ï¼Œå‚è„Šå‰‡å‘ä¸Šæ”¯æ’æ­£è„Šï¼Œçµ¦äººè‰¯å¥½çš„å°è±¡ï¼Œæ˜¯ä¸­åœ‹å—æ–¹ç‰¹æœ‰çš„å»ºç¯‰å½¢å¼ï¼Œåœ¨è‡ºç£å°¤ç‚ºç››è¡Œã€‚ç‡•å°¾è„Šã€é¦¬èƒŒè„Šå’Œç“¦é®æ˜¯å°ç£æ¼¢äººå¤åå±‹é ‚çš„ä¸‰å¤§ç‰¹å¾µã€‚",

            "å°æ±Ÿï¼šã€Œè¬è¬ä½ å€‘ä»Šå¤©é™ªä¼´æˆ‘ä¸€èµ·å°‹æ‰¾å®¢å®¶çš„è¨˜æ†¶ï¼Œå°ç£å®¢å®¶æ—ç¾¤çš„è‡ªæˆ‘éš±å½¢åŒ–ï¨ˆç‚ºæ˜¯ä¸€å€‹æ™®éç‚ºå®¢å®¶äººæ‰€èªçŸ¥çš„å…¬å…±å•é¡Œï¼Œæ§‹æˆå®¢å®¶éš±å½¢çš„äº”å¤§å› ç´ æ˜¯ï¼šï¼ˆä¸€ï¼‰å¼±å‹¢æ—ç¾¤ï¥¯ï¼›ï¼ˆäºŒï¼‰æ–‡åŒ–èåˆï¥¯ï¼›ï¼ˆä¸‰ï¼‰ èªè¨€ï§Šå¤±ï¥¯ï¼›ï¼ˆå››ï¼‰ï¦Œå²åŒ…è¢±ï¥¯ï¼›ï¼ˆäº”ï¼‰è‡ªï§å‹•æ©Ÿï¥¯ï¼Œé€™äº›åŸå› ç¢ºå¯¦å­˜åœ¨æ–¼ç¾å¯¦çš„å®¢å®¶ç¤¾ç¾¤ç•¶ä¸­ã€‚å°±åƒæˆ‘é›–ç„¶æ˜¯ä¾†è‡ªå®¢å®¶å®¶åº­ï¼Œä½†å»å› ç‚ºé•·è¼©éƒ½æ²’æœ‰æåŠï¼Œç”šè‡³åªè·Ÿæˆ‘èªªã€Œåœ‹èªã€ã€ã€Œå°èªã€æ‰è®“æˆ‘ä¸çŸ¥é“è‡ªå·±çš„å®¢å®¶èº«ä»½ã€‚ç¾åœ¨æ”¿åºœä¹Ÿç©æ¥µåœ¨æ¨å‹•å‚³çµ±å°æ–‡çš„å¾©ç”¦ï¼Œå¸Œæœ›èƒ½è®“æ›´å¤šäººèªè­˜å®¢å®¶èªè¨€åŠæ–‡åŒ–çš„ç¾ï¼Œå’Œè®“å¤šå…ƒçš„æ–‡åŒ–é¢è²Œåœ¨å°ç£é€™å€‹å°å³¶ä¸Šå…¼å®¹ä¸¦è“„ã€‚å¸Œæœ›æœ‰æ›´å¤šå®¢å®¶é’å¹´é¡˜æ„ç”¨è‡ªä¿¡çš„æ…‹åº¦é¢å°å®¢å®¶çš„èº«åˆ†ï¼Œä¹ŸæœŸå¾…èƒ½è®“æ›´å¤šæ°‘çœ¾çœ‹è¦‹å®¢å®¶ä¸åªæœ‰å°æ°£çš„ä¸€é¢ã€‚ã€",

            "å°æ±Ÿï¼šã€Œæ‰“å¹«ä½ å…œï¼Œäº»å“æ­£åšå¾—å®Œæˆä»Šæ™¡æ—¥ä¸ªæ—…è¡Œï¼Œæœ‰é–’æ­£ä¾†å°ï¼ã€"
        ],
        "question": "æ­å–œä½ å®Œæˆäº†æ‰€æœ‰é—œå¡ï¼\nè«‹è¼¸å…¥ 'é–‹å§‹' é‡æ–°é–‹å§‹éŠæˆ²ã€‚",
        "options": [],
        "answer": "",
        "next": "finish"
    },
    "finish": None
}

user_data = {}


@ app.route("/", methods=['POST'])
def callback():
    signature = request.headers['X-Line-Signature']
    body = request.get_data(as_text=True)
    app.logger.info("Request body: " + body)
    print(body)
    try:
        handler.handle(body, signature)
    except InvalidSignatureError:
        abort(400)
    return 'OK'


@ handler.add(MessageEvent, message=(TextMessage, ImageMessage))
def handle_message(event):
    message_type = event.message.type
    user_id = event.source.user_id
    reply_token = event.reply_token

    if message_type == 'text':
        message = event.message.text.strip()
        # Check user progress or start the story
        if message == "é–‹å§‹":
            start_story(user_id, reply_token)
        else:
            user_progress = get_user_progress(user_id)
            if (message == 'é—œæ–¼å®¢å®¶'):
                send_message(
                    reply_token, "https://www.hakka.gov.tw/index.html")
            elif (message == 'åœ°é»æç¤º'):
                send_message(
                    reply_token, "https://www.google.com/maps/d/edit?mid=1EDXW7ousVBIDaB9DfDiA1q-A_slZiQ8&ll=24.90371743628607%2C121.2071314861216&z=12")
            elif (message == 'å¿ƒå¾—å›é¥‹'):
                send_message(
                    reply_token, "https://docs.google.com/forms/d/e/1FAIpQLScmuH_Kdn4W8RhwFC3o5PWUSYBrkjbhEkhAjQ1XpCpKcob0uw/viewform?usp=sf_link")
            elif (message == 'Hello'):
                send_message(
                    reply_token, ("æ—©æœŸè‡ªå¤§é™¸æ¸¡æµ·ä¾†å°çš„æ¼¢äººç§»æ°‘ï¼Œå¤šä¾†è‡ªé–©ç²µå…©åœ°ï¼Œé–©ç±å±…æ°‘æ³°åŠç‚ºæ¼³ã€æ³‰äºŒåºœäººæ°ï¼Œ"
                                  "ç²µç±å‰‡ç‚ºå˜‰æ‡‰å·åŠæ½®å·ã€æƒ å·çš„å®¢å®¶äººï¼Œåœ¨æ¸…æœæ™‚ï¼Œæ¼³ã€æ³‰ã€å®¢ä¸‰æ—äººç¾¤æ¶‡æ¸­åˆ†æ˜ï¼Œä½†ä»Šå¤©ï¼Œ"
                                  "é™¤äº†æ¡ƒç«¹è‹—å’Œç¾æ¿ƒç­‰åœ°å®¢å®¶æ–‡åŒ–é‚„éå¸¸çªé¡¯ï¼Œå…¶ä»–åœ°å€çš„å®¢æ—å·²èˆ‡é–©å—æ—ç¾¤èåˆï¼Œæˆç‚ºã€Œç¦ä½¬å®¢ã€ã€‚"
                                  "æœ‰è¨±å¤šå¹´è¼•ä¸€ä»£çš„å®¢ç±é’å¹´éƒ½åªèªªé–©å—èªå’Œåœ‹èªï¼Œæ›´ç”šè‡³ä¸çŸ¥é“è‡ªå·±æ˜¯å®¢ç±çš„äººã€‚\n\nä½åœ¨å“¡æ—çš„æ±Ÿæ²³é„°ï¼ˆå°æ±Ÿï¼‰"
                                  "æ˜¯é‚„åœ¨å°±è®€å°å­¸å…­å¹´ç´šçš„å­¸ç”Ÿï¼Œå°±åœ¨ä¸€æ¬¡è·Ÿè‘—çˆºçˆºå»ç¥­ç¥–æ™‚å¶ç„¶ç™¼ç¾çˆºçˆºè·Ÿç¥–å…ˆèªªè©±æ™‚ç”¨çš„ä¸æ˜¯åœ‹èªï¼Œ"
                                  "ä¹Ÿä¸æ˜¯åœ¨åœ‹å°è£¡å­¸åˆ°çš„é–©å—èªï¼Œå› æ­¤æ„Ÿåˆ°å¾ˆå¥½å¥‡ã€‚å¾Œä¾†ä¸€å•ä¹‹ä¸‹ä»–æ‰çŸ¥é“åŸä¾†é‚£æ˜¯å®¢å®¶è©±ï¼Œè€Œä»–å€‘å®¶å…¶å¯¦æ˜¯å®¢ç±å®¶æ—ï¼Œ"
                                  "æ‰€ä»¥ä»–èº«ä¸Šä¹Ÿæµæ·Œè‘—å®¢å®¶çš„è¡€è„ˆã€‚ç„¶è€Œä»–å€‘å®¶æ—å·²ç¶“æ·±å—å‘¨åœç’°å¢ƒå¼•éŸ¿è€Œå°è‡´ç¦ä½¬åŒ–ï¼Œå¹³æ™‚éƒ½èªªåœ‹èªå’Œé–©å—èªï¼Œ"
                                  "å·²ç¶“æ¼¸æ¼¸å¿˜è¨˜èº«ç‚ºå®¢å®¶äººçš„äº‹æƒ…ã€‚\n\nå› æ­¤å°æ±Ÿæ±ºå®šä¾†åˆ°å®¢å®¶äººèšé›†çš„å¤§å¸‚ã€Œæ¡ƒåœ’ã€ï¼Œä¾†å°‹æ‰¾è‡ªå·±çš„å®¢å®¶èªåŒæ„Ÿï¼Œ"
                                  "ä¸¦ä¸”æ›´åŠ äº†è§£æœ‰é—œå®¢å®¶äººçš„æ–‡åŒ–å’Œæ­·å²ã€‚å°±åœ¨é€™æ™‚ä»–é‡åˆ°äº†é¾è‚‡æ”¿ï¼Œä¸¦æ±ºå®šå¾é€™è£¡é–‹å§‹è¿½å°‹å®¢å®¶çš„è¨˜æ†¶ã€‚\n"
                                  "å°±è®“æˆ‘å€‘ä¸€èµ·è·Ÿéš¨å°æ±Ÿä¸€èµ·é–‹å§‹é€™è¶Ÿæ—…ç¨‹å§ï¼\n\nè«‹è¼¸å…¥ 'é–‹å§‹' é–‹å§‹éŠæˆ²ã€‚"))

            if user_progress:
                current_question = story.get(user_progress)
                if message == current_question['answer'] or (message == 'P' and DEBUG):
                    next_question = story.get(current_question['next'])
                    send_question(user_id, reply_token, next_question)
                    set_user_progress(user_id, current_question['next'])
                else:
                    send_message(reply_token, "å›ç­”éŒ¯èª¤ï¼Œè«‹å†è©¦ä¸€æ¬¡ã€‚")
            else:
                send_message(reply_token, ("æ—©æœŸè‡ªå¤§é™¸æ¸¡æµ·ä¾†å°çš„æ¼¢äººç§»æ°‘ï¼Œå¤šä¾†è‡ªé–©ç²µå…©åœ°ï¼Œé–©ç±å±…æ°‘æ³°åŠç‚ºæ¼³ã€æ³‰äºŒåºœäººæ°ï¼Œ"
                                           "ç²µç±å‰‡ç‚ºå˜‰æ‡‰å·åŠæ½®å·ã€æƒ å·çš„å®¢å®¶äººï¼Œåœ¨æ¸…æœæ™‚ï¼Œæ¼³ã€æ³‰ã€å®¢ä¸‰æ—äººç¾¤æ¶‡æ¸­åˆ†æ˜ï¼Œä½†ä»Šå¤©ï¼Œ"
                                           "é™¤äº†æ¡ƒç«¹è‹—å’Œç¾æ¿ƒç­‰åœ°å®¢å®¶æ–‡åŒ–é‚„éå¸¸çªé¡¯ï¼Œå…¶ä»–åœ°å€çš„å®¢æ—å·²èˆ‡é–©å—æ—ç¾¤èåˆï¼Œæˆç‚ºã€Œç¦ä½¬å®¢ã€ã€‚"
                                           "æœ‰è¨±å¤šå¹´è¼•ä¸€ä»£çš„å®¢ç±é’å¹´éƒ½åªèªªé–©å—èªå’Œåœ‹èªï¼Œæ›´ç”šè‡³ä¸çŸ¥é“è‡ªå·±æ˜¯å®¢ç±çš„äººã€‚\n\nä½åœ¨å“¡æ—çš„æ±Ÿæ²³é„°ï¼ˆå°æ±Ÿï¼‰"
                                           "æ˜¯é‚„åœ¨å°±è®€å°å­¸å…­å¹´ç´šçš„å­¸ç”Ÿï¼Œå°±åœ¨ä¸€æ¬¡è·Ÿè‘—çˆºçˆºå»ç¥­ç¥–æ™‚å¶ç„¶ç™¼ç¾çˆºçˆºè·Ÿç¥–å…ˆèªªè©±æ™‚ç”¨çš„ä¸æ˜¯åœ‹èªï¼Œ"
                                           "ä¹Ÿä¸æ˜¯åœ¨åœ‹å°è£¡å­¸åˆ°çš„é–©å—èªï¼Œå› æ­¤æ„Ÿåˆ°å¾ˆå¥½å¥‡ã€‚å¾Œä¾†ä¸€å•ä¹‹ä¸‹ä»–æ‰çŸ¥é“åŸä¾†é‚£æ˜¯å®¢å®¶è©±ï¼Œè€Œä»–å€‘å®¶å…¶å¯¦æ˜¯å®¢ç±å®¶æ—ï¼Œ"
                                           "æ‰€ä»¥ä»–èº«ä¸Šä¹Ÿæµæ·Œè‘—å®¢å®¶çš„è¡€è„ˆã€‚ç„¶è€Œä»–å€‘å®¶æ—å·²ç¶“æ·±å—å‘¨åœç’°å¢ƒå¼•éŸ¿è€Œå°è‡´ç¦ä½¬åŒ–ï¼Œå¹³æ™‚éƒ½èªªåœ‹èªå’Œé–©å—èªï¼Œ"
                                           "å·²ç¶“æ¼¸æ¼¸å¿˜è¨˜èº«ç‚ºå®¢å®¶äººçš„äº‹æƒ…ã€‚\n\nå› æ­¤å°æ±Ÿæ±ºå®šä¾†åˆ°å®¢å®¶äººèšé›†çš„å¤§å¸‚ã€Œæ¡ƒåœ’ã€ï¼Œä¾†å°‹æ‰¾è‡ªå·±çš„å®¢å®¶èªåŒæ„Ÿï¼Œ"
                                           "ä¸¦ä¸”æ›´åŠ äº†è§£æœ‰é—œå®¢å®¶äººçš„æ–‡åŒ–å’Œæ­·å²ã€‚å°±åœ¨é€™æ™‚ä»–é‡åˆ°äº†é¾è‚‡æ”¿ï¼Œä¸¦æ±ºå®šå¾é€™è£¡é–‹å§‹è¿½å°‹å®¢å®¶çš„è¨˜æ†¶ã€‚\n"
                                           "å°±è®“æˆ‘å€‘ä¸€èµ·è·Ÿéš¨å°æ±Ÿä¸€èµ·é–‹å§‹é€™è¶Ÿæ—…ç¨‹å§ï¼\n\nè«‹è¼¸å…¥ 'é–‹å§‹' é–‹å§‹éŠæˆ²ã€‚"))

    elif message_type == 'image':
        user_progress = get_user_progress(user_id)
        if user_progress:
            current_question = story.get(user_progress)
            if allow_image_upload(current_question):  # æª¢æŸ¥ç•¶å‰å•é¡Œæ˜¯å¦å…è¨±åœ–åƒä¸Šå‚³ä½œç‚ºç­”æ¡ˆ
                next_question = story.get(current_question['next'])
                send_question(user_id, reply_token, next_question)
                set_user_progress(user_id, current_question['next'])
            else:
                send_message(reply_token, "é€™ä¸æ˜¯ä¸€å€‹ä¸Šå‚³ç…§ç‰‡å³å¯å›ç­”æ­£ç¢ºçš„å•é¡Œã€‚")


def allow_image_upload(question):
    # æ·»åŠ é‚è¼¯ä¾†åˆ¤æ–·å“ªäº›å•é¡Œå…è¨±ç”¨æˆ¶ä¸Šå‚³åœ–ç‰‡ä½œç‚ºæ­£ç¢ºç­”æ¡ˆ
    return 'allow_image_upload' in question and question['allow_image_upload']


def start_story(user_id, reply_token):
    initial_question = story['start']
    set_user_progress(user_id, 'start')
    send_question(user_id, reply_token, initial_question)


def send_messages_in_batches(user_id, reply_token, messages, batch_size=5):
    # è®¡ç®—æ¶ˆæ¯åˆ†æ‰¹æ¬¡æ•°
    batch_count = (len(messages) + batch_size - 1) // batch_size
    for i in range(batch_count):
        batch = messages[i * batch_size:(i + 1) * batch_size]
        try:
            if i == 0:
                # ä½¿ç”¨LINE Bot APIå‘é€æ¶ˆæ¯
                line_bot_api.reply_message(reply_token, batch)
            else:
                # ä½¿ç”¨LINE Bot APIå‘é€æ¶ˆæ¯
                line_bot_api.push_message(user_id, batch)
        except LineBotApiError as e:
            # è¾“å‡ºé”™è¯¯ä¿¡æ¯
            print(
                f"\n\n\nError sending batch {i + 1}/{batch_count}: {e.message}, request_id: {e.request_id}\n\n\n")


def send_question(user_id, reply_token, question):
    if question is not None:
        messages = []
        if 'messages' in question:
            for msg in question['messages']:
                messages.append(TextSendMessage(text=msg))
                if 'image_urls' in question and len(question['image_urls']) > 0:
                    image_url = question['image_urls'].pop(0)
                    messages.append(ImageSendMessage(
                        original_content_url=image_url,
                        preview_image_url=image_url
                    ))
        options_text = "\n".join(
            question['options']) if question['options'] else ""
        full_message = f"{question['question']}\n{options_text}"
        # æ·»åŠ è½¬ä¹‰å¤„ç†ç‰¹æ®Šå­—ç¬¦
        messages.append(TextSendMessage(text=full_message))

        # ä½¿ç”¨æ‰¹é‡æ¶ˆæ¯å‘é€
        send_messages_in_batches(user_id, reply_token, messages, batch_size=5)
    else:
        # å¤„ç†å®Œæˆæ‰€æœ‰å…³å¡çš„æƒ…å†µ
        line_bot_api.reply_message(
            reply_token, TextSendMessage(text="æ­å–œä½ å®Œæˆäº†æ‰€æœ‰é—œå¡ï¼è«‹è¼¸å…¥ 'é–‹å§‹' é‡æ–°é–‹å§‹éŠæˆ²ã€‚")
        )

# å…¶ä»–å‡½æ•°å¦‚å‰æ‰€è¿°ä¿ç•™ä¸å˜


def send_message(reply_token, message):
    line_bot_api.reply_message(reply_token, TextSendMessage(text=message))


def get_user_progress(user_id):
    if user_id not in user_data:
        return None
    return user_data[user_id]


def set_user_progress(user_id, question_key):
    global user_data
    user_data[user_id] = question_key


if __name__ == "__main__":
    port = int(os.environ.get('PORT', 80))
    app.run(host='0.0.0.0', port=port)
